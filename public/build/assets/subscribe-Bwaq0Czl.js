import{c as Z,r as J,u as ee,j as s}from"./app-BgeeRgAY.js";import{B as se}from"./badge-5B0lRxRJ.js";import{B as M}from"./button-BZdl-t6N.js";import{c as O,d as z}from"./card-B72YnaTi.js";import{d as te,c as ae,b as le,e as ie,a as ne}from"./dialog-BcaXAq46.js";import{I as re}from"./input-Dq43pMsW.js";import{L as ce}from"./label-D0Jsxd11.js";import{K as oe}from"./app-layout-yCpTeWBW.js";import{C as Q}from"./check-QIrvrvJj.js";import{c as de}from"./index-ByK7L7Io.js";import{C as me}from"./refresh-cw-CN3NdGV6.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xe=[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]],pe=de("ShoppingCart",xe);function ke(l){const e=Z.c(74),{open:R,onOpenChange:C,plan:t}=l,[V]=J.useState(t),[o,$]=J.useState(1),H=V?.id||"";let k;e[0]!==H?(k={plan_id:H,extra_sms_units:0,payment_method:"card"},e[0]=H,e[1]=k):k=e[1];const a=ee(k);let P;e[2]!==a||e[3]!==t?(P=()=>{t?.id&&a.setData("plan_id",t.id)},e[2]=a,e[3]=t,e[4]=P):P=e[4];const K=t?.id;let D;if(e[5]!==K?(D=[K],e[5]=K,e[6]=D):D=e[6],J.useEffect(P,D),!t)return null;let p,h,i,n,r,u,j,c,f,b,d,y,N,m,x;if(e[7]!==a||e[8]!==C||e[9]!==R||e[10]!==t.extra_sms_price||e[11]!==t.features||e[12]!==t.name||e[13]!==t.periodicity_type||e[14]!==t.price||e[15]!==o){const Y=t.features?.find(je)?.charges||0;i=t.price,r=t.extra_sms_price||0,n=a.data.extra_sms_units*r,m=i+n,x=Y+a.data.extra_sms_units;let B;e[31]===Symbol.for("react.memo_cache_sentinel")?(B=()=>$(2),e[31]=B):B=e[31];const W=B;let E;e[32]===Symbol.for("react.memo_cache_sentinel")?(E=()=>$(1),e[32]=E):E=e[32],u=E;let T;e[33]!==a||e[34]!==C?(T=()=>{C(!1),$(1),a.reset()},e[33]=a,e[34]=C,e[35]=T):T=e[35];const w=T;let U;e[36]!==a||e[37]!==w?(U=()=>{a.post(oe.subscribe().url,{onSuccess:()=>{w()}})},e[36]=a,e[37]=w,e[38]=U):U=e[38],j=U;let F;e[39]!==t.name?(F=t.name.charAt(0).toUpperCase(),e[39]=t.name,e[40]=F):F=e[40];let I;e[41]!==t.name?(I=t.name.slice(1).replace("-"," "),e[41]=t.name,e[42]=I):I=e[42],c=F+I;const X=t.periodicity_type?.toLowerCase()||"month";h=te,N=R,f=w,p=ae,b="max-h-[90vh] max-w-2xl overflow-y-auto";const q=o===1?"Subscribe to Plan":"Review & Confirm";let S;e[43]!==q?(S=s.jsx(le,{className:"text-2xl font-semibold",children:q}),e[43]=q,e[44]=S):S=e[44];const G=o===1?`Customize your ${c} plan subscription`:"Review your order details before completing payment";let v;e[45]!==G?(v=s.jsx(ie,{children:G}),e[45]=G,e[46]=v):v=e[46],e[47]!==S||e[48]!==v?(d=s.jsxs(ne,{children:[S,v]}),e[47]=S,e[48]=v,e[49]=d):d=e[49],y=o===1&&s.jsxs("div",{className:"space-y-6",children:[s.jsx(O,{className:"border-2 border-blue-500",children:s.jsxs(z,{className:"pt-6",children:[s.jsxs("div",{className:"mb-4 flex items-start justify-between",children:[s.jsxs("div",{children:[s.jsxs("h3",{className:"text-xl font-bold",children:[c," Plan"]}),s.jsxs("p",{className:"text-sm text-gray-500 capitalize",children:[t.periodicity_type,"ly subscription"]})]}),s.jsxs(se,{className:"px-3 py-1 text-lg",children:["₦",i.toLocaleString()]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[s.jsx(Q,{className:"h-4 w-4 text-green-500"}),s.jsxs("span",{children:[Y.toLocaleString()," free SMS/",X.toLowerCase()]})]}),s.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[s.jsx(Q,{className:"h-4 w-4 text-green-500"}),s.jsxs("span",{children:["₦",r,"/extra SMS unit"]})]}),t.features?.filter(ue).map(he)]})]})}),s.jsxs("div",{children:[s.jsx(ce,{htmlFor:"extra_sms_units",className:"text-base font-semibold",children:"Add Extra SMS Units (Optional)"}),s.jsxs("p",{className:"mb-3 text-sm text-gray-500",children:["Purchase additional SMS units at ₦",r," per unit"]}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx(re,{id:"extra_sms_units",type:"number",min:"0",step:"10",placeholder:"0",value:a.data.extra_sms_units,onChange:L=>a.setData("extra_sms_units",parseInt(L.target.value)||0),className:"text-lg"}),s.jsx("div",{className:"flex gap-2",children:[100,500,1e3].map(L=>s.jsxs(M,{type:"button",variant:"outline",onClick:()=>a.setData("extra_sms_units",(a.data.extra_sms_units||0)+L),children:["+",L]},L))})]}),a.data.extra_sms_units>0&&s.jsxs("p",{className:"mt-2 text-sm text-green-600",children:["✓ Adding ",a.data.extra_sms_units," extra SMS units for ₦",n.toLocaleString()]})]}),s.jsx(O,{className:"bg-gray-50",children:s.jsxs(z,{className:"pt-6",children:[s.jsx("h4",{className:"mb-3 font-semibold",children:"Order Summary"}),s.jsxs("div",{className:"space-y-2 text-sm",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsxs("span",{children:[c," Plan"]}),s.jsxs("span",{className:"font-medium",children:["₦",i.toLocaleString()]})]}),s.jsxs("div",{className:"flex justify-between text-gray-600",children:[s.jsxs("span",{children:["Includes ",Y," SMS"]}),s.jsx("span",{children:"Free"})]}),a.data.extra_sms_units>0&&s.jsxs("div",{className:"flex justify-between",children:[s.jsxs("span",{children:["Extra SMS (",a.data.extra_sms_units," ","units)"]}),s.jsxs("span",{className:"font-medium",children:["₦",n.toLocaleString()]})]}),s.jsxs("div",{className:"mt-2 flex justify-between border-t pt-2 text-base font-bold",children:[s.jsx("span",{children:"Total Amount"}),s.jsxs("span",{className:"text-blue-600",children:["₦",m.toLocaleString()]})]}),s.jsxs("div",{className:"flex justify-between font-medium text-green-600",children:[s.jsx("span",{children:"Total SMS Units"}),s.jsxs("span",{children:[x.toLocaleString()," SMS"]})]})]})]})}),s.jsxs("div",{className:"flex gap-3 pt-4",children:[s.jsx(M,{type:"button",variant:"outline",className:"flex-1",onClick:w,children:"Cancel"}),s.jsx(M,{type:"button",className:"flex-1",onClick:W,children:"Continue to Payment"})]})]}),e[7]=a,e[8]=C,e[9]=R,e[10]=t.extra_sms_price,e[11]=t.features,e[12]=t.name,e[13]=t.periodicity_type,e[14]=t.price,e[15]=o,e[16]=p,e[17]=h,e[18]=i,e[19]=n,e[20]=r,e[21]=u,e[22]=j,e[23]=c,e[24]=f,e[25]=b,e[26]=d,e[27]=y,e[28]=N,e[29]=m,e[30]=x}else p=e[16],h=e[17],i=e[18],n=e[19],r=e[20],u=e[21],j=e[22],c=e[23],f=e[24],b=e[25],d=e[26],y=e[27],N=e[28],m=e[29],x=e[30];let g;e[50]!==i||e[51]!==n||e[52]!==r||e[53]!==a.data.extra_sms_units||e[54]!==a.processing||e[55]!==u||e[56]!==j||e[57]!==t.periodicity_type||e[58]!==c||e[59]!==o||e[60]!==m||e[61]!==x?(g=o===2&&s.jsxs("div",{className:"space-y-6",children:[s.jsx(O,{className:"border-2 border-blue-500",children:s.jsxs(z,{className:"pt-6",children:[s.jsxs("div",{className:"mb-4 flex items-center gap-2",children:[s.jsx(pe,{className:"h-5 w-5 text-blue-600"}),s.jsx("h3",{className:"text-lg font-bold",children:"Order Details"})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex justify-between border-b py-2",children:[s.jsxs("div",{children:[s.jsxs("p",{className:"font-semibold",children:[c," Plan"]}),s.jsxs("p",{className:"text-sm text-gray-500",children:[t.periodicity_type,"ly subscription"]})]}),s.jsxs("p",{className:"font-bold",children:["₦",i.toLocaleString()]})]}),a.data.extra_sms_units>0&&s.jsxs("div",{className:"flex justify-between border-b py-2",children:[s.jsxs("div",{children:[s.jsx("p",{className:"font-semibold",children:"Extra SMS Units"}),s.jsxs("p",{className:"text-sm text-gray-500",children:[a.data.extra_sms_units," ","units @ ₦",r," ","each"]})]}),s.jsxs("p",{className:"font-bold",children:["₦",n.toLocaleString()]})]}),s.jsxs("div",{className:"flex justify-between rounded-lg bg-blue-50 px-4 py-3",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-lg font-bold",children:"Total Amount"}),s.jsxs("p",{className:"text-sm text-gray-600",children:["You'll receive"," ",x.toLocaleString()," ","SMS units"]})]}),s.jsxs("p",{className:"text-2xl font-bold text-blue-600",children:["₦",m.toLocaleString()]})]})]})]})}),s.jsx(O,{className:"border-blue-200 bg-blue-50",children:s.jsx(z,{className:"pt-6",children:s.jsxs("div",{className:"flex gap-3",children:[s.jsx(me,{className:"mt-0.5 h-5 w-5 flex-shrink-0 text-blue-600"}),s.jsxs("div",{className:"space-y-1 text-sm",children:[s.jsx("p",{className:"font-semibold text-blue-900",children:"Before you proceed:"}),s.jsxs("ul",{className:"list-inside list-disc space-y-1 text-blue-800",children:[s.jsx("li",{children:"Subscription activates immediately after payment"}),s.jsx("li",{children:"SMS units are credited instantly"}),s.jsx("li",{children:"Auto-renews on the same date"}),s.jsx("li",{children:"Cancel anytime; access continues until period ends"})]})]})]})})}),s.jsxs("div",{className:"flex gap-3 pt-4",children:[s.jsx(M,{type:"button",variant:"outline",className:"flex-1",onClick:u,disabled:a.processing,children:"Back"}),s.jsx(M,{type:"button",className:"flex-1",onClick:j,disabled:a.processing,children:a.processing?"Processing...":`Pay ₦${m.toLocaleString()}`})]})]}),e[50]=i,e[51]=n,e[52]=r,e[53]=a.data.extra_sms_units,e[54]=a.processing,e[55]=u,e[56]=j,e[57]=t.periodicity_type,e[58]=c,e[59]=o,e[60]=m,e[61]=x,e[62]=g):g=e[62];let _;e[63]!==p||e[64]!==g||e[65]!==b||e[66]!==d||e[67]!==y?(_=s.jsxs(p,{className:b,children:[d,y,g]}),e[63]=p,e[64]=g,e[65]=b,e[66]=d,e[67]=y,e[68]=_):_=e[68];let A;return e[69]!==h||e[70]!==f||e[71]!==_||e[72]!==N?(A=s.jsx(h,{open:N,onOpenChange:f,children:_}),e[69]=h,e[70]=f,e[71]=_,e[72]=N,e[73]=A):A=e[73],A}function he(l,e){return s.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[s.jsx(Q,{className:"h-4 w-4 text-green-500"}),s.jsxs("span",{className:"capitalize",children:[l.name.replace(/-/g," "),l.charges&&` (${l.charges})`]})]},e)}function ue(l){return l.name!=="sms-units"}function je(l){return l.name==="sms-units"}export{ke as S,pe as a};
