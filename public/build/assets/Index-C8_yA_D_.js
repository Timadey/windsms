import{c as ve,r as he,u as fe,j as s,H as Ne,b as we}from"./app-BvMZre6F.js";import{B as C}from"./app-logo-icon-DGkGRm03.js";import{I as ue}from"./input-C5hd_TS2.js";import{L as Q}from"./label-CAoiq0rB.js";import{D as pe,a as xe,b as be,c as je,d as _e}from"./dialog-CnI_mlUv.js";import{T as De,a as ge,b as W,e as X,c as ke,d as Te}from"./table-DdxiYWcY.js";import{B as ce}from"./badge-J4niqoSa.js";import{j as Ce,k as Ae,A as Be,l as Ue}from"./app-layout-rHsYI1bO.js";import{d as Pe}from"./index-C4J_hXM0.js";import{P as Fe}from"./pagination-D8D5ybfR.js";import{U as He}from"./upload-Cb7POHRx.js";import{P as Le}from"./plus-DW1R7kCD.js";/* empty css            */import"./index-DG7TpF1m.js";import"./index-C4LTaHEL.js";function ss(n){const e=ve.c(84),{subscribers:o,tags:c}=n,[Y,de]=he.useState(!1),[Z,me]=he.useState(!1);let A;e[0]!==o.links?(A=o.links||[],e[0]=o.links,e[1]=A):A=e[1];const ee=A;let B;e[2]===Symbol.for("react.memo_cache_sentinel")?(B={phone_number:"",name:"",tag_ids:[]},e[2]=B):B=e[2];const{data:a,setData:r,post:se,processing:le,reset:te,errors:ie}=fe(B);let U;e[3]===Symbol.for("react.memo_cache_sentinel")?(U={file:null,tag_ids:[]},e[3]=U):U=e[3];const t=fe(U);let P;e[4]!==se||e[5]!==te?(P=l=>{l.preventDefault(),se(Ce().url,{onSuccess:()=>{te(),de(!1)}})},e[4]=se,e[5]=te,e[6]=P):P=e[6];const ae=P;let F;e[7]!==t?(F=l=>{l.preventDefault(),t.post(Ae().url,{onSuccess:()=>{t.reset(),me(!1)}})},e[7]=t,e[8]=F):F=e[8];const re=F,Se=Ee;let H;e[9]===Symbol.for("react.memo_cache_sentinel")?(H=[{title:"Dashboard",href:Pe().url}],e[9]=H):H=e[9];const ye=H;let L;e[10]===Symbol.for("react.memo_cache_sentinel")?(L=s.jsx(Ne,{title:"Subscribers"}),e[10]=L):L=e[10];let I;e[11]===Symbol.for("react.memo_cache_sentinel")?(I=s.jsx("h2",{className:"text-2xl font-semibold",children:"Subscribers"}),e[11]=I):I=e[11];let E;e[12]===Symbol.for("react.memo_cache_sentinel")?(E=s.jsx(pe,{asChild:!0,children:s.jsxs(C,{variant:"outline",children:[s.jsx(He,{className:"mr-2 h-4 w-4"}),"Bulk Upload"]})}),e[12]=E):E=e[12];let R;e[13]===Symbol.for("react.memo_cache_sentinel")?(R=s.jsx(xe,{children:s.jsx(be,{children:"Bulk Upload Subscribers"})}),e[13]=R):R=e[13];let O;e[14]===Symbol.for("react.memo_cache_sentinel")?(O=s.jsx(Q,{htmlFor:"file",children:"CSV File"}),e[14]=O):O=e[14];let d;e[15]!==t?(d=s.jsx(ue,{id:"file",type:"file",accept:".csv,.txt",onChange:l=>t.setData("file",l.target.files[0])}),e[15]=t,e[16]=d):d=e[16];let V;e[17]===Symbol.for("react.memo_cache_sentinel")?(V=s.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"CSV should have columns: phone_number"}),e[17]=V):V=e[17];let m;e[18]!==d?(m=s.jsxs("div",{children:[O,d,V]}),e[18]=d,e[19]=m):m=e[19];let z;e[20]===Symbol.for("react.memo_cache_sentinel")?(z=s.jsx(Q,{children:"Tags (optional)"}),e[20]=z):z=e[20];let h;if(e[21]!==t||e[22]!==c){let l;e[24]!==t?(l=i=>s.jsx(ce,{variant:t.data.tag_ids.includes(i.id)?"default":"outline",className:"cursor-pointer",onClick:()=>{const ne=t.data.tag_ids.includes(i.id)?t.data.tag_ids.filter(oe=>oe!==i.id):[...t.data.tag_ids,i.id];t.setData("tag_ids",ne)},children:i.name},i.id),e[24]=t,e[25]=l):l=e[25],h=c.map(l),e[21]=t,e[22]=c,e[23]=h}else h=e[23];let f;e[26]!==h?(f=s.jsxs("div",{children:[z,s.jsx("div",{className:"mt-2 flex flex-wrap gap-2",children:h})]}),e[26]=h,e[27]=f):f=e[27];let u;e[28]!==t.processing?(u=s.jsx(C,{type:"submit",disabled:t.processing,children:"Upload"}),e[28]=t.processing,e[29]=u):u=e[29];let p;e[30]!==re||e[31]!==m||e[32]!==f||e[33]!==u?(p=s.jsxs(je,{children:[R,s.jsxs("form",{onSubmit:re,className:"space-y-4",children:[m,f,u]})]}),e[30]=re,e[31]=m,e[32]=f,e[33]=u,e[34]=p):p=e[34];let x;e[35]!==Z||e[36]!==p?(x=s.jsxs(_e,{open:Z,onOpenChange:me,children:[E,p]}),e[35]=Z,e[36]=p,e[37]=x):x=e[37];let $;e[38]===Symbol.for("react.memo_cache_sentinel")?($=s.jsx(pe,{asChild:!0,children:s.jsxs(C,{children:[s.jsx(Le,{className:"mr-2 h-4 w-4"}),"Add Subscriber"]})}),e[38]=$):$=e[38];let q;e[39]===Symbol.for("react.memo_cache_sentinel")?(q=s.jsx(xe,{children:s.jsx(be,{children:"Add New Subscriber"})}),e[39]=q):q=e[39];let G;e[40]===Symbol.for("react.memo_cache_sentinel")?(G=s.jsx(Q,{htmlFor:"phone_number",children:"Phone Number"}),e[40]=G):G=e[40];let b;e[41]!==r?(b=l=>r("phone_number",l.target.value),e[41]=r,e[42]=b):b=e[42];let j;e[43]!==a.phone_number||e[44]!==ie.phone_number||e[45]!==b?(j=s.jsxs("div",{children:[G,s.jsx(ue,{id:"phone_number",value:a.phone_number,onChange:b,error:ie.phone_number})]}),e[43]=a.phone_number,e[44]=ie.phone_number,e[45]=b,e[46]=j):j=e[46];let J;e[47]===Symbol.for("react.memo_cache_sentinel")?(J=s.jsx(Q,{children:"Tags"}),e[47]=J):J=e[47];let _;if(e[48]!==a.tag_ids||e[49]!==r||e[50]!==c){let l;e[52]!==a.tag_ids||e[53]!==r?(l=i=>s.jsx(ce,{variant:a.tag_ids.includes(i.id)?"default":"outline",className:"cursor-pointer",onClick:()=>{const ne=a.tag_ids.includes(i.id)?a.tag_ids.filter(oe=>oe!==i.id):[...a.tag_ids,i.id];r("tag_ids",ne)},children:i.name},i.id),e[52]=a.tag_ids,e[53]=r,e[54]=l):l=e[54],_=c.map(l),e[48]=a.tag_ids,e[49]=r,e[50]=c,e[51]=_}else _=e[51];let g;e[55]!==_?(g=s.jsxs("div",{children:[J,s.jsx("div",{className:"mt-2 flex flex-wrap gap-2",children:_})]}),e[55]=_,e[56]=g):g=e[56];let S;e[57]!==le?(S=s.jsx(C,{type:"submit",disabled:le,children:"Add Subscriber"}),e[57]=le,e[58]=S):S=e[58];let y;e[59]!==ae||e[60]!==j||e[61]!==g||e[62]!==S?(y=s.jsxs(je,{children:[q,s.jsxs("form",{onSubmit:ae,className:"space-y-4",children:[j,g,S]})]}),e[59]=ae,e[60]=j,e[61]=g,e[62]=S,e[63]=y):y=e[63];let v;e[64]!==Y||e[65]!==y?(v=s.jsxs(_e,{open:Y,onOpenChange:de,children:[$,y]}),e[64]=Y,e[65]=y,e[66]=v):v=e[66];let N;e[67]!==x||e[68]!==v?(N=s.jsx("div",{className:"border-b p-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[I,s.jsxs("div",{className:"flex gap-2",children:[x,v]})]})}),e[67]=x,e[68]=v,e[69]=N):N=e[69];let K;e[70]===Symbol.for("react.memo_cache_sentinel")?(K=s.jsx(De,{children:s.jsxs(ge,{children:[s.jsx(W,{children:"Phone Number"}),s.jsx(W,{children:"Tags"}),s.jsx(W,{children:"Added"}),s.jsx(W,{children:"Actions"})]})}),e[70]=K):K=e[70];let w;if(e[71]!==o.data){let l;e[73]===Symbol.for("react.memo_cache_sentinel")?(l=i=>s.jsxs(ge,{children:[s.jsx(X,{className:"font-medium",children:i.phone_number}),s.jsx(X,{children:s.jsx("div",{className:"flex flex-wrap gap-1",children:i.tags?.map(Ie)})}),s.jsx(X,{children:new Date(i.created_at).toLocaleDateString()}),s.jsx(X,{children:s.jsx(C,{variant:"destructive",size:"sm",onClick:()=>Se(i.id),children:"Delete"})})]},i.id),e[73]=l):l=e[73],w=o.data.map(l),e[71]=o.data,e[72]=w}else w=e[72];let D;e[74]!==w?(D=s.jsxs(ke,{children:[K,s.jsx(Te,{children:w})]}),e[74]=w,e[75]=D):D=e[75];let k;e[76]!==ee?(k=s.jsx(Fe,{links:ee}),e[76]=ee,e[77]=k):k=e[77];let T;e[78]!==D||e[79]!==k?(T=s.jsxs("div",{className:"p-6",children:[D,k]}),e[78]=D,e[79]=k,e[80]=T):T=e[80];let M;return e[81]!==N||e[82]!==T?(M=s.jsxs(Be,{breadcrumbs:ye,children:[L,s.jsx("div",{className:"py-12",children:s.jsx("div",{className:"mx-auto max-w-7xl sm:px-6 lg:px-8",children:s.jsxs("div",{className:"overflow-hidden bg-white shadow-sm sm:rounded-lg",children:[N,T]})})})]}),e[81]=N,e[82]=T,e[83]=M):M=e[83],M}function Ie(n){return s.jsx(ce,{variant:"secondary",children:n.name},n.id)}function Ee(n){confirm("Are you sure you want to delete this subscriber?")&&we.delete(Ue(n).url,{onSuccess:Re,preserveScroll:!0})}function Re(){console.log("Subscriber deleted successfully")}export{ss as default};
