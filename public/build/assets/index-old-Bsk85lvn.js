import{c as xe,r as M,j as s,H as he}from"./app-zTKrwnOY.js";import{C as n,a as c,b as A,c as L,d as q}from"./card-D2yGn6Ul.js";import{B as U}from"./button-CMk4Py6r.js";import{B as R}from"./badge-D2wG32c_.js";import{A as pe}from"./app-layout-CrXKN4G8.js";import{S as fe}from"./subscribe-BLDPv-X5.js";import{T as ee}from"./triangle-alert-ThirQ_vZ.js";import{X as je}from"./x--f__sHhd.js";import{R as ue}from"./refresh-cw-jHCiHdTv.js";import{Z as ge}from"./zap-BHKHZdzj.js";import{C as r}from"./check-BUbcDLIa.js";import{T as Ne}from"./trending-up-CdDLzqx0.js";/* empty css            */import"./utils-DFaayVYX.js";import"./index-BK1pq41q.js";import"./index-eV-uJ5J3.js";import"./index-B9OtZIVH.js";import"./megaphone-BY1duQWZ.js";import"./users-Fd1bjyI9.js";import"./dialog-DdVOF1Ov.js";import"./input-DuEXvV74.js";import"./label-CEOOGP2g.js";function Ve(a){const e=xe.c(63),{plans:P,currentSubscription:t,featureUsage:E,smsBalance:G,transactions:F,extraSmsPrice:l}=a,[J,re]=M.useState(null),[K,se]=M.useState(!1),[,ne]=M.useState(!1),[,te]=M.useState(!1),[,ce]=M.useState(!1);let I;e[0]===Symbol.for("react.memo_cache_sentinel")?(I=D=>{re(D),se(!0)},e[0]=I):I=e[0];const me=I,ae=Be;let z;e[1]===Symbol.for("react.memo_cache_sentinel")?(z=[{title:"Dashboard",href:"/dashboard"},{title:"Billing",href:"/billing"}],e[1]=z):z=e[1];const de=z,Q=t?.is_active&&t?.days_remaining<=7;let T;e[2]===Symbol.for("react.memo_cache_sentinel")?(T=s.jsx(he,{title:"Billing & Subscription"}),e[2]=T):T=e[2];let H;e[3]===Symbol.for("react.memo_cache_sentinel")?(H=s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold",children:"Billing & Subscription"}),s.jsx("p",{className:"text-gray-500 mt-1",children:"Manage your subscription, SMS units, and payment methods"})]}),e[3]=H):H=e[3];let m;e[4]!==t?(m=(!t||!t.is_active)&&s.jsx(n,{className:"border-red-500 bg-red-50",children:s.jsx(c,{className:"pt-6",children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(ee,{className:"w-5 h-5 text-red-600 flex-shrink-0 mt-0.5"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h3",{className:"font-semibold text-red-900",children:"No Active Subscription"}),s.jsx("p",{className:"text-sm text-red-700 mt-1",children:"Subscribe to a plan below to start sending campaigns and accessing all features."})]})]})})}),e[4]=t,e[5]=m):m=e[5];let d;e[6]!==t||e[7]!==Q?(d=Q&&s.jsx(n,{className:"border-orange-500 bg-orange-50",children:s.jsx(c,{className:"pt-6",children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(ee,{className:"w-5 h-5 text-orange-600 flex-shrink-0 mt-0.5"}),s.jsx("div",{className:"flex-1",children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold text-orange-900",children:"Subscription Expiring Soon"}),s.jsxs("p",{className:"text-sm text-orange-700 mt-1",children:["Your subscription expires in ",t.days_remaining," days. Renew now to continue enjoying uninterrupted service."]})]}),s.jsx(U,{size:"sm",onClick:()=>te(!0),children:"Renew Now"})]})})]})})}),e[6]=t,e[7]=Q,e[8]=d):d=e[8];let o;e[9]!==t?(o=t&&s.jsxs(n,{className:t.is_active?"border-green-500":"border-orange-500",children:[s.jsx(A,{children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{children:[s.jsxs(L,{className:"flex items-center gap-2",children:["Current Subscription",s.jsx(R,{variant:t.is_active?"default":"destructive",children:t.is_active?"Active":"Expired"}),t.is_suppressed&&s.jsx(R,{variant:"outline",className:"bg-orange-100",children:"Cancelling on expiry"})]}),s.jsxs(q,{className:"mt-2",children:["Plan: ",s.jsx("span",{className:"font-semibold capitalize",children:ae(t.plan).title})]})]}),s.jsxs("div",{className:"flex gap-2",children:[t.is_active&&!t.is_suppressed&&s.jsxs(U,{variant:"outline",size:"sm",onClick:()=>ce(!0),children:[s.jsx(je,{className:"w-4 h-4 mr-2"}),"Cancel"]}),(t.is_suppressed||!t.is_active)&&s.jsxs(U,{size:"sm",onClick:()=>te(!0),children:[s.jsx(ue,{className:"w-4 h-4 mr-2"}),"Renew"]})]})]})}),s.jsx(c,{children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-500",children:"Started"}),s.jsx("p",{className:"font-medium",children:new Date(t.started_at).toLocaleDateString()})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-500",children:"Expires"}),s.jsx("p",{className:"font-medium",children:new Date(t.expires_at).toLocaleDateString()})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-500",children:"Days Remaining"}),s.jsxs("p",{className:"font-medium flex items-center gap-2",children:[t.days_remaining>0?t.days_remaining:0," days",t.days_remaining<=7&&t.days_remaining>0&&s.jsx(ee,{className:"w-4 h-4 text-orange-500"})]})]})]})})]}),e[9]=t,e[10]=o):o=e[10];let $;e[11]===Symbol.for("react.memo_cache_sentinel")?($=s.jsxs("div",{children:[s.jsxs(L,{className:"flex items-center gap-2",children:[s.jsx(ge,{className:"w-5 h-5 text-yellow-500"}),"SMS Units Balance"]}),s.jsx(q,{className:"mt-1",children:"Available SMS credits"})]}),e[11]=$):$=e[11];let x;e[12]!==t?.is_active?(x=t?.is_active&&s.jsx(U,{onClick:()=>ne(!0),children:"Buy Extra Units"}),e[12]=t?.is_active,e[13]=x):x=e[13];let h;e[14]!==x?(h=s.jsx(A,{children:s.jsxs("div",{className:"flex items-center justify-between",children:[$,x]})}),e[14]=x,e[15]=h):h=e[15];let p;e[16]!==G?(p=G?.toLocaleString()||0,e[16]=G,e[17]=p):p=e[17];let f;e[18]!==p?(f=s.jsx("div",{className:"text-4xl font-bold text-blue-600",children:p}),e[18]=p,e[19]=f):f=e[19];let Y;e[20]===Symbol.for("react.memo_cache_sentinel")?(Y=s.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"SMS units available"}),e[20]=Y):Y=e[20];let j;e[21]!==f?(j=s.jsxs(c,{children:[f,Y]}),e[21]=f,e[22]=j):j=e[22];let u;e[23]!==h||e[24]!==j?(u=s.jsxs(n,{children:[h,j]}),e[23]=h,e[24]=j,e[25]=u):u=e[25];let g;e[26]!==E?(g=E&&E.length>0&&s.jsxs(n,{children:[s.jsxs(A,{children:[s.jsx(L,{children:"Feature Usage"}),s.jsx(q,{children:"Current billing period consumption"})]}),s.jsx(c,{className:"space-y-4",children:E.map(ke)})]}),e[26]=E,e[27]=g):g=e[27];const V=t?.is_active?"Upgrade or Change Plan":"Choose Your Plan";let N;e[28]!==V?(N=s.jsx("h2",{className:"text-2xl font-bold mb-6",children:V}),e[28]=V,e[29]=N):N=e[29];let b;if(e[30]!==t?.plan||e[31]!==l||e[32]!==P){let D;e[34]!==t?.plan||e[35]!==l?(D=i=>{const k=ae(i.name),oe=i.features.find(Ce),ie=i.features.find(we),W=i.features.find(_e),le=i.features.find(ve),B=t?.plan===i.name;return s.jsxs(n,{className:`relative ${k.popular?"border-blue-500 shadow-lg":""} ${B?"border-green-500":""}`,children:[k.popular&&!B&&s.jsx(R,{className:"absolute -top-3 left-1/2 -translate-x-1/2",children:"Most Popular"}),B&&s.jsx(R,{className:"absolute -top-3 left-1/2 -translate-x-1/2 bg-green-500",children:"Current Plan"}),s.jsxs(A,{children:[s.jsx(L,{children:k.title}),s.jsx(q,{children:k.subtitle}),s.jsxs("div",{className:"mt-4",children:[s.jsxs("span",{className:"text-3xl font-bold",children:["₦",k.price.toLocaleString()]}),s.jsx("span",{className:"text-gray-500",children:"/month"})]})]}),s.jsxs(c,{children:[s.jsxs("ul",{className:"space-y-3 mb-6",children:[s.jsxs("li",{className:"flex items-start gap-2",children:[s.jsx(r,{className:"w-5 h-5 text-green-500 flex-shrink-0 mt-0.5"}),s.jsxs("span",{children:[oe?.charges||0," Free SMS/month"]})]}),s.jsxs("li",{className:"flex items-start gap-2",children:[s.jsx(r,{className:"w-5 h-5 text-green-500 flex-shrink-0 mt-0.5"}),s.jsxs("span",{children:["₦",l,"/Extra SMS Unit"]})]}),s.jsxs("li",{className:"flex items-start gap-2",children:[s.jsx(r,{className:"w-5 h-5 text-green-500 flex-shrink-0 mt-0.5"}),s.jsx("span",{children:"Campaign & Bulk Import"})]}),s.jsxs("li",{className:"flex items-start gap-2",children:[s.jsx(r,{className:"w-5 h-5 text-green-500 flex-shrink-0 mt-0.5"}),s.jsxs("span",{children:[ie?.charges>=2e8?"Unlimited":`${(ie?.charges/1e3).toLocaleString()}k`," monthly contacts"]})]}),s.jsxs("li",{className:"flex items-start gap-2",children:[s.jsx(r,{className:"w-5 h-5 text-green-500 flex-shrink-0 mt-0.5"}),s.jsxs("span",{children:[W?.charges>=1e4?"Unlimited":W?.charges," Sender ID",W?.charges>1?"s":""]})]}),s.jsxs("li",{className:"flex items-start gap-2",children:[s.jsx(r,{className:"w-5 h-5 text-green-500 flex-shrink-0 mt-0.5"}),s.jsxs("span",{children:[le?.charges>=2e5?"Unlimited":le?.charges," tags"]})]}),i.features.find(ye)&&s.jsxs("li",{className:"flex items-start gap-2",children:[s.jsx(r,{className:"w-5 h-5 text-green-500 flex-shrink-0 mt-0.5"}),s.jsx("span",{children:"API Access"})]}),i.features.find(Se)&&s.jsxs("li",{className:"flex items-start gap-2",children:[s.jsx(r,{className:"w-5 h-5 text-green-500 flex-shrink-0 mt-0.5"}),s.jsx("span",{children:"AI Mixer"})]})]}),s.jsx(U,{className:"w-full",variant:B?"outline":k.popular?"default":"outline",onClick:()=>me(i),disabled:B,children:B?"Current Plan":"Subscribe"})]})]},i.id)},e[34]=t?.plan,e[35]=l,e[36]=D):D=e[36],b=P.filter(De).map(D),e[30]=t?.plan,e[31]=l,e[32]=P,e[33]=b}else b=e[33];let S;e[37]!==b?(S=s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:b}),e[37]=b,e[38]=S):S=e[38];let y;e[39]!==N||e[40]!==S?(y=s.jsxs("div",{children:[N,S]}),e[39]=N,e[40]=S,e[41]=y):y=e[41];let Z;e[42]===Symbol.for("react.memo_cache_sentinel")?(Z=s.jsx(A,{children:s.jsxs(L,{className:"flex items-center gap-2",children:[s.jsx(Ne,{className:"w-5 h-5"}),"Recent Transactions"]})}),e[42]=Z):Z=e[42];let O;e[43]===Symbol.for("react.memo_cache_sentinel")?(O=s.jsx("thead",{children:s.jsxs("tr",{className:"border-b",children:[s.jsx("th",{className:"text-left py-3",children:"Date"}),s.jsx("th",{className:"text-left py-3",children:"Description"}),s.jsx("th",{className:"text-left py-3",children:"Amount"}),s.jsx("th",{className:"text-left py-3",children:"Status"}),s.jsx("th",{className:"text-left py-3",children:"Method"})]})}),e[43]=O):O=e[43];let v;e[44]!==F?(v=F?.length>0?F.map(be):s.jsx("tr",{children:s.jsx("td",{colSpan:"5",className:"text-center py-8 text-gray-500",children:"No transactions yet"})}),e[44]=F,e[45]=v):v=e[45];let _;e[46]!==v?(_=s.jsxs(n,{children:[Z,s.jsx(c,{children:s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full text-sm",children:[O,s.jsx("tbody",{children:v})]})})})]}),e[46]=v,e[47]=_):_=e[47];let w;e[48]!==u||e[49]!==g||e[50]!==y||e[51]!==_||e[52]!==m||e[53]!==d||e[54]!==o?(w=s.jsxs("div",{className:"p-6 space-y-8",children:[H,m,d,o,u,g,y,_]}),e[48]=u,e[49]=g,e[50]=y,e[51]=_,e[52]=m,e[53]=d,e[54]=o,e[55]=w):w=e[55];let C;e[56]!==l||e[57]!==J||e[58]!==K?(C=s.jsx(fe,{open:K,onOpenChange:se,plan:J,extraSmsPrice:l}),e[56]=l,e[57]=J,e[58]=K,e[59]=C):C=e[59];let X;return e[60]!==w||e[61]!==C?(X=s.jsxs(pe,{breadcrumbs:de,children:[T,w,C]}),e[60]=w,e[61]=C,e[62]=X):X=e[62],X}function be(a){return s.jsxs("tr",{className:"border-b",children:[s.jsx("td",{className:"py-3",children:new Date(a.created_at).toLocaleDateString()}),s.jsx("td",{className:"py-3",children:a.description}),s.jsxs("td",{className:"py-3 font-medium",children:["₦",a.amount.toLocaleString()]}),s.jsx("td",{className:"py-3",children:s.jsx(R,{variant:a.status==="completed"?"default":a.status==="failed"?"destructive":"secondary",children:a.status})}),s.jsx("td",{className:"py-3 capitalize",children:a.payment_method.replace("_"," ")})]},a.id)}function Se(a){return a.name==="ai-mixer"}function ye(a){return a.name==="api-access"}function ve(a){return a.name==="tags"}function _e(a){return a.name==="sender-id"}function we(a){return a.name==="contacts-upload"}function Ce(a){return a.name==="sms-units"}function De(a){return!a.is_yearly}function ke(a,e){return s.jsxs("div",{children:[s.jsxs("div",{className:"flex justify-between mb-2",children:[s.jsx("span",{className:"font-medium capitalize",children:a.name.replace(/-/g," ")}),s.jsxs("span",{className:"text-sm text-gray-600",children:[a.consumed.toLocaleString()," / ",a.total.toLocaleString()]})]}),s.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[a.remaining.toLocaleString()," remaining (",a.percentage,"% used)"]})]},e)}function Be(a){const e={free:{title:"Free",subtitle:"Individuals, Micro Businesses",price:3e3,sms:610},pro:{title:"Pro",subtitle:"SMEs, Marketers",price:5e3,sms:1050,popular:!0},business:{title:"Business",subtitle:"High-volume Businesses",price:1e4,sms:2200},enterprise:{title:"Enterprise",subtitle:"Agencies, Enterprises",price:2e4,sms:4600}},P=a?.replace("-yearly","")||"";return e[P]||{}}export{Ve as default};
