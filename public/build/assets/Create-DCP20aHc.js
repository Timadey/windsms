import{c as me,u as oe,r as E,j as s,L as de,a as he,H as ue}from"./app-DkuaKs7R.js";import{B as pe}from"./button-DEWTOza6.js";import{I as ae}from"./input-DZnmHXM7.js";import{L as T}from"./label-CDV8N_bE.js";import{T as be}from"./textarea-CBQAnq9A.js";import{C as ne}from"./checkbox-B7HjESRx.js";import{d as fe,k as te,A as xe}from"./app-layout-DjcEY8s3.js";import{d as _e}from"./index-DSWKGzIo.js";import{I as K}from"./input-error-BHxzSb2r.js";/* empty css            */import"./utils-DFaayVYX.js";import"./index-DKUWucUl.js";import"./index-BX6ecx82.js";import"./index-BY0riNnH.js";import"./check-CJ-RwoAT.js";import"./x-GpPVQP8J.js";import"./send-Dlj8qGrF.js";import"./shield-check-BuNJNOL8.js";import"./users-YqeB5lb8.js";const ge=[{title:"Dashboard",href:_e().url},{title:"Single SMS",href:te.index().url}];function Qe(F){const e=me.c(85),{senderIds:c}=F;let M;e[0]===Symbol.for("react.memo_cache_sentinel")?(M={sender_id:"",recipient_type:"manual",phone_number:"",subscriber_id:"",message:""},e[0]=M):M=e[0];const{data:l,setData:t,post:O,processing:L,errors:i}=oe(M),[a,le]=E.useState("manual");let $;e[1]===Symbol.for("react.memo_cache_sentinel")?($=[],e[1]=$):$=e[1];const[R,V]=E.useState($),[n,ie]=E.useState(""),[X,Y]=E.useState(!1);let A,B;e[2]!==a||e[3]!==n?(A=()=>{if(a==="subscriber"&&n.length>0){Y(!0);const r=setTimeout(()=>{he.get(te.searchSubscribers().url,{params:{query:n}}).then(ce=>{V(ce.data),Y(!1)}).catch(()=>{Y(!1)})},300);return()=>clearTimeout(r)}else V([])},B=[n,a],e[2]=a,e[3]=n,e[4]=A,e[5]=B):(A=e[4],B=e[5]),E.useEffect(A,B);let H;e[6]!==O?(H=r=>{r.preventDefault(),O(te.store().url)},e[6]=O,e[7]=H):H=e[7];const Z=H;let Q;e[8]===Symbol.for("react.memo_cache_sentinel")?(Q=s.jsx(ue,{title:"Send Single SMS"}),e[8]=Q):Q=e[8];let U;e[9]===Symbol.for("react.memo_cache_sentinel")?(U=s.jsx("div",{className:"border-b p-6",children:s.jsx("h2",{className:"text-2xl font-semibold",children:"Send Single SMS"})}),e[9]=U):U=e[9];let q;e[10]===Symbol.for("react.memo_cache_sentinel")?(q=s.jsx(T,{htmlFor:"sender_id",children:"Sender ID"}),e[10]=q):q=e[10];let m;e[11]!==t?(m=r=>t("sender_id",r.target.value),e[11]=t,e[12]=m):m=e[12];let z;e[13]===Symbol.for("react.memo_cache_sentinel")?(z=s.jsx("option",{value:"",children:"Select a sender ID"}),e[13]=z):z=e[13];let o;e[14]!==c?(o=c.length>0?c.map(je):s.jsx("option",{disabled:!0,children:"Default sender ID will be used if empty"}),e[14]=c,e[15]=o):o=e[15];let d;e[16]!==l.sender_id||e[17]!==o||e[18]!==m?(d=s.jsxs("select",{id:"sender_id",value:l.sender_id,onChange:m,className:"mt-1 w-full rounded-md border px-3 py-2",children:[z,o]}),e[16]=l.sender_id,e[17]=o,e[18]=m,e[19]=d):d=e[19];let h;e[20]!==i.sender_id?(h=s.jsx(K,{message:i.sender_id,className:"mt-1"}),e[20]=i.sender_id,e[21]=h):h=e[21];let u;e[22]!==d||e[23]!==h?(u=s.jsxs("div",{children:[q,d,h]}),e[22]=d,e[23]=h,e[24]=u):u=e[24];let p;e[25]!==c.length?(p=c.length===0&&s.jsxs("p",{className:"mt-2 flex items-center gap-2 text-sm text-amber-600",children:[s.jsx("span",{children:"⚠️"}),s.jsxs("span",{children:["The default WindSMS SenderID will be used."," ",s.jsx(de,{href:fe().url,className:"font-medium underline",children:"Customize your SenderID"})]})]}),e[25]=c.length,e[26]=p):p=e[26];const ee=a==="manual";let b;e[27]!==t?(b=r=>{r&&(le("manual"),t("recipient_type","manual"),t("subscriber_id",""))},e[27]=t,e[28]=b):b=e[28];let f;e[29]!==ee||e[30]!==b?(f=s.jsx(ne,{id:"recipient_manual",checked:ee,onCheckedChange:b}),e[29]=ee,e[30]=b,e[31]=f):f=e[31];let P;e[32]===Symbol.for("react.memo_cache_sentinel")?(P=s.jsx(T,{htmlFor:"recipient_manual",className:"cursor-pointer",children:"Enter phone number manually"}),e[32]=P):P=e[32];let x;e[33]!==f?(x=s.jsxs("div",{className:"flex items-center space-x-2",children:[f,P]}),e[33]=f,e[34]=x):x=e[34];let _;e[35]!==l.phone_number||e[36]!==i.phone_number||e[37]!==a||e[38]!==t?(_=a==="manual"&&s.jsxs("div",{className:"ml-6",children:[s.jsx(T,{htmlFor:"phone_number",children:"Phone Number"}),s.jsx(ae,{id:"phone_number",placeholder:"e.g. 08012345678",value:l.phone_number,onChange:r=>t("phone_number",r.target.value),className:"mt-1"}),s.jsx(K,{message:i.phone_number,className:"mt-1"})]}),e[35]=l.phone_number,e[36]=i.phone_number,e[37]=a,e[38]=t,e[39]=_):_=e[39];const se=a==="subscriber";let g;e[40]!==t?(g=r=>{r&&(le("subscriber"),t("recipient_type","subscriber"),t("phone_number",""))},e[40]=t,e[41]=g):g=e[41];let j;e[42]!==se||e[43]!==g?(j=s.jsx(ne,{id:"recipient_subscriber",checked:se,onCheckedChange:g}),e[42]=se,e[43]=g,e[44]=j):j=e[44];let W;e[45]===Symbol.for("react.memo_cache_sentinel")?(W=s.jsx(T,{htmlFor:"recipient_subscriber",className:"cursor-pointer",children:"Search for subscriber"}),e[45]=W):W=e[45];let S;e[46]!==j?(S=s.jsxs("div",{className:"flex items-center space-x-2",children:[j,W]}),e[46]=j,e[47]=S):S=e[47];let y;e[48]!==l.subscriber_id||e[49]!==i.subscriber_id||e[50]!==X||e[51]!==a||e[52]!==n||e[53]!==t||e[54]!==R?(y=a==="subscriber"&&s.jsxs("div",{className:"ml-6 space-y-2",children:[s.jsx(T,{htmlFor:"subscriber_search",children:"Search Subscriber"}),s.jsx(ae,{id:"subscriber_search",placeholder:"Type name or phone number...",value:n,onChange:r=>ie(r.target.value),className:"mt-1"}),X&&s.jsx("p",{className:"text-sm text-gray-500",children:"Searching..."}),R.length>0&&s.jsx("div",{className:"mt-2 max-h-48 overflow-y-auto rounded-md border",children:R.map(r=>s.jsxs("div",{onClick:()=>{t("subscriber_id",r.id),ie(`${r.name||"Unknown"} (${r.phone_number})`),V([])},className:`cursor-pointer p-2 hover:bg-gray-100 ${l.subscriber_id===r.id?"bg-blue-50":""}`,children:[s.jsx("div",{className:"font-medium",children:r.name||"Unknown"}),s.jsx("div",{className:"text-sm text-gray-500",children:r.phone_number})]},r.id))}),s.jsx(K,{message:i.subscriber_id,className:"mt-1"})]}),e[48]=l.subscriber_id,e[49]=i.subscriber_id,e[50]=X,e[51]=a,e[52]=n,e[53]=t,e[54]=R,e[55]=y):y=e[55];let N;e[56]!==x||e[57]!==_||e[58]!==S||e[59]!==y?(N=s.jsxs("div",{className:"space-y-4",children:[x,_,S,y]}),e[56]=x,e[57]=_,e[58]=S,e[59]=y,e[60]=N):N=e[60];let G;e[61]===Symbol.for("react.memo_cache_sentinel")?(G=s.jsx(T,{htmlFor:"message",children:"Message"}),e[61]=G):G=e[61];let v;e[62]!==t?(v=r=>t("message",r.target.value),e[62]=t,e[63]=v):v=e[63];let C;e[64]!==l.message||e[65]!==v?(C=s.jsx(be,{id:"message",placeholder:"Type your message here...",value:l.message,onChange:v,rows:4,className:"mt-1"}),e[64]=l.message,e[65]=v,e[66]=C):C=e[66];let w;e[67]!==l.message.length?(w=s.jsxs("div",{className:"mt-1 text-right text-xs text-gray-500",children:[l.message.length," characters"]}),e[67]=l.message.length,e[68]=w):w=e[68];let I;e[69]!==i.message?(I=s.jsx(K,{message:i.message,className:"mt-1"}),e[69]=i.message,e[70]=I):I=e[70];let k;e[71]!==C||e[72]!==w||e[73]!==I?(k=s.jsxs("div",{children:[G,C,w,I]}),e[71]=C,e[72]=w,e[73]=I,e[74]=k):k=e[74];const re=L?"Sending...":"Send SMS";let D;e[75]!==L||e[76]!==re?(D=s.jsx(pe,{type:"submit",disabled:L,className:"w-full",children:re}),e[75]=L,e[76]=re,e[77]=D):D=e[77];let J;return e[78]!==Z||e[79]!==u||e[80]!==p||e[81]!==N||e[82]!==k||e[83]!==D?(J=s.jsxs(xe,{breadcrumbs:ge,children:[Q,s.jsx("div",{className:"py-12",children:s.jsx("div",{className:"mx-auto max-w-2xl sm:px-6 lg:px-8",children:s.jsxs("div",{className:"overflow-hidden bg-white shadow-sm sm:rounded-lg",children:[U,s.jsx("div",{className:"p-6",children:s.jsxs("form",{onSubmit:Z,className:"space-y-6",children:[u,p,N,k,D]})})]})})})]}),e[78]=Z,e[79]=u,e[80]=p,e[81]=N,e[82]=k,e[83]=D,e[84]=J):J=e[84],J}function je(F){return s.jsx("option",{value:F.sender_id,children:F.sender_id},F.id)}export{Qe as default};
